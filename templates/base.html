<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Mi Aplicaci√≥n{% endblock %}</title>
    {% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/responsive_helpers.css') }}">
    {% endblock %}
</head>
<body>

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer>
        <!-- Contenido del footer -->
    </footer>

    {% block scripts %}
    <script type="text/javascript">
    // Tiempo de inactividad: 3 minutos
    const INACTIVITY_TIMEOUT = 180000;

    {% if session.get('rol') %}
        const logoutUrl = "{{ url_for('logout_inactividad') }}";
    {% else %}
        const logoutUrl = null;
    {% endif %}

    if (logoutUrl) {
        let timeoutTimer;

        function resetTimer() {
            clearTimeout(timeoutTimer);
            timeoutTimer = setTimeout(() => {
                window.location.href = logoutUrl;
            }, INACTIVITY_TIMEOUT);
        }

        window.onload = resetTimer;
        document.addEventListener('mousemove', resetTimer);
        document.addEventListener('keypress', resetTimer);
        document.addEventListener('click', resetTimer);
        document.addEventListener('scroll', resetTimer);
        document.addEventListener('touchstart', resetTimer);
        document.addEventListener('touchmove', resetTimer);
    }
    </script>
    {% endblock %}
</body>
</html>
